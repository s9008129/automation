# 🚀 素材蒐集工具改善計畫

> **版本**：草稿 v0.1.0
> **建立日期**：2026-02-10
> **目標讀者**：專案擁有者（非技術人員）
> **工具名稱**：內部網路網頁素材離線蒐集工具 (web-material-collector)

---

## 📌 為什麼需要改善？

目前工具已經可以正常蒐集網頁素材（ARIA 快照、截圖、錄製），但在**實際使用中發現以下問題**：

| # | 問題 | 影響 | 嚴重度 |
|---|------|------|--------|
| 1 | 錄製互動流程時，中間經過的頁面沒有自動擷取 ARIA 快照 | AI 拿到的素材不完整，只有最終錄製檔 | 🔴 高 |
| 2 | 錄製結束後沒有明確提示，使用者不知道是否完成 | 操作體驗不佳，容易誤操作 | 🟡 中 |
| 3 | 錄製檔中會留下明文密碼（如登入帳密） | **安全風險** — 密碼可能被意外分享 | 🔴 高 |
| 4 | 沒有自動檢查機制防止密碼被提交到版本控制 | 密碼可能被 git commit 帶入歷史 | 🔴 高 |
| 5 | 操作過程缺乏清楚的進度回饋和步驟指引 | 新手不知道工具在做什麼 | 🟡 中 |

---

## 🎯 改善目標

用一句話說：**讓工具更安全、更完整、更好用。**

具體來說：
1. **更完整的素材** — 錄製過程中自動擷取每個頁面的 ARIA 快照
2. **更安全** — 自動偵測並移除錄製檔中的明文密碼
3. **更好用** — 更清楚的操作提示和進度回饋

---

## 📋 改善項目一覽

### T-01：錄製時自動擷取中間頁面的 ARIA 快照

**目前情況**：使用 Playwright Codegen 錄製操作流程時，只會產出一個 `.ts` 腳本檔案。AI 要分析這個流程，只能靠程式碼猜測頁面長什麼樣子。

**改善後**：錄製結束後，工具會自動解析錄製檔案，找出所有訪問過的網址，然後逐一開啟這些頁面並擷取 ARIA 快照。

**你會感受到的差異**：
- 之前：AI 只看到「點擊這個按鈕、輸入那個文字」的腳本
- 之後：AI 還能看到每個頁面的完整結構（按鈕在哪、表格有什麼欄位），生成的自動化腳本更準確

### T-02：錄製結束時顯示明確提示

**目前情況**：Codegen 錄製結束時，畫面上沒有清楚的提示告訴你「錄製已完成」。

**改善後**：錄製完成後會顯示：
```
✅ 錄製完成！
📄 錄製檔案已儲存到: materials/recordings/login-flow.ts
📊 檔案大小: 1,234 bytes
🔜 下一步: 工具將自動擷取錄製過程中訪問的頁面快照...
```

**你會感受到的差異**：每一步都有清楚的文字說明，不用猜測工具在做什麼。

### T-03：自動解析錄製檔取得訪問過的 URL

**目前情況**：錄製檔（如 `login.ts`）裡面包含 `page.goto('http://...')` 和點擊連結等操作，但這些 URL 沒有被利用。

**改善後**：工具會自動從錄製檔中提取所有 URL，然後逐一開啟並擷取 ARIA 快照。

**你會感受到的差異**：不需要手動逐頁蒐集，錄製一次就自動獲得所有頁面的完整素材。

### T-04：自動偵測並替換明文密碼

**目前情況**：錄製檔 `login.ts` 中包含 `.fill('密碼', 'Cyhtaxibm777')` 這樣的明文密碼。如果你把這個檔案分享給別人或交給 AI，密碼就暴露了。

**改善後**：
1. 工具會自動偵測密碼欄位（名稱包含「密碼」、「password」的輸入框）
2. 將明文密碼替換為環境變數佔位符：`.fill('密碼', process.env.LOGIN_PASSWORD)`
3. 在檔案開頭加入說明，告訴使用者如何設定環境變數

**你會感受到的差異**：不用擔心密碼外洩，工具會幫你自動處理。

### T-05：版本控制安全防護 (Pre-commit Hook)

**目前情況**：如果你不小心把含有密碼的錄製檔加入 git，密碼就會被記錄在版本歷史中。

**改善後**：每次你嘗試提交（commit）程式碼時，工具會自動掃描 `materials/recordings/` 資料夾，如果發現可能的明文密碼，就會阻止提交並提醒你。

**你會感受到的差異**：多了一層安全網，就算忘記檢查也不會意外提交密碼。

### T-06：改善操作介面（CLI 提示與進度回饋）

**目前情況**：執行過程中的進度提示不夠清楚，新手可能不知道現在執行到哪一步。

**改善後**：
- 每個主要步驟都有清楚的編號和圖示
- 顯示進度百分比（例如：「[3/5] 正在擷取第 3 個頁面...」）
- 長時間操作會顯示「請稍候...」的動態提示

**你會感受到的差異**：操作過程更流暢，隨時知道工具在做什麼。

### T-07：改善計畫文件（就是這份文件）

**目的**：用非技術人員也能理解的方式，記錄所有改善項目的目標和進度。

---

## 📅 執行順序建議

```
第一優先（安全）          第二優先（功能）          第三優先（體驗）
┌──────────────┐      ┌──────────────┐      ┌──────────────┐
│ T-04 密碼替換 │      │ T-01 中間快照 │      │ T-06 UX 改善 │
│ T-05 安全防護 │  →   │ T-03 URL 解析 │  →   │ T-07 文件更新 │
└──────────────┘      │ T-02 結束提示 │      └──────────────┘
                      └──────────────┘
```

---

## ✅ 驗收方式（非技術人員版本）

每個改善項目完成後，你可以這樣驗證：

| 項目 | 驗收方法 |
|------|---------|
| T-01 | 錄製一段操作流程後，檢查 `materials/aria-snapshots/` 是否多了新的快照檔案 |
| T-02 | 錄製結束時，畫面上是否顯示「✅ 錄製完成」和後續步驟說明 |
| T-03 | 檢查 `materials/aria-snapshots/` 中的檔案是否對應你錄製時經過的每個頁面 |
| T-04 | 打開錄製檔案（如 `login.ts`），搜尋你的密碼文字，應該找不到 |
| T-05 | 故意在錄製檔中寫入假密碼，嘗試 `git commit`，應該被阻止 |
| T-06 | 執行工具時，每一步是否都有清楚的文字提示和進度顯示 |
| T-07 | 這份文件是否清楚易懂 |

---

## 🔒 安全注意事項

> ⚠️ **重要提醒**：目前 `materials/recordings/login.ts` 中包含明文密碼。
> 在 T-04 完成之前，請**不要**將 `materials/` 資料夾分享給不信任的對象。

---

## 📝 變更紀錄

| 日期 | 變更 | 負責人 |
|------|------|--------|
| 2026-02-10 | 建立改善計畫草稿 | AI (CTO) |
