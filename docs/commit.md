# NCERT æœˆå ±è‡ªå‹•ä¸‹è¼‰è…³æœ¬ â€” è®Šæ›´ç´€éŒ„

> **æ–‡ä»¶ç‰ˆæœ¬**ï¼š1.0.0 ï½œ **æ›´æ–°æ—¥æœŸ**ï¼š2026-02-11 ï½œ **æ™‚å€**ï¼šAsia/Taipei (UTC+8)

---

## 1. å°ˆæ¡ˆèƒŒæ™¯èˆ‡ç›®çš„

æœ¬å°ˆæ¡ˆï¼ˆ`web-material-collector`ï¼‰æ˜¯ä¸€å¥—**å…§éƒ¨ç¶²è·¯ç¶²é ç´ æé›¢ç·šè’é›†å·¥å…·**ï¼Œé€é Playwright é€£æ¥ä½¿ç”¨è€…å·²é–‹å•Ÿçš„ Chromeï¼ˆCDP å”å®šï¼‰ï¼Œåœ¨ä¸é—œé–‰ä½¿ç”¨è€…ç€è¦½å™¨çš„å‰æä¸‹è‡ªå‹•åŒ–è’é›† ARIA å¿«ç…§ã€æˆªåœ–èˆ‡ PDF æ–‡ä»¶ã€‚æœ¬æ¬¡è®Šæ›´çš„æ ¸å¿ƒç‚º `src/download-ncert-report.ts`â€”â€”ä¸€æ”¯è‡ªå‹•ç™»å…¥ NCERT ç¶²ç«™ã€å®šä½ã€Œè³‡å®‰è¯é˜²ç›£æ§æœˆå ±ã€è¡¨æ ¼ç¬¬äºŒè³‡æ–™åˆ—ã€ä¸‹è¼‰å°æ‡‰ PDF ä¸¦ç™»å‡ºçš„ç«¯å°ç«¯è‡ªå‹•åŒ–è…³æœ¬ã€‚æ­¤è…³æœ¬å®Œå…¨é›¢ç·šé‹ä½œï¼Œæ†‘è­‰ç”±ç’°å¢ƒè®Šæ•¸ï¼ˆ`.env`ï¼‰æä¾›ï¼Œæª”åç¶“ `safeFileName()` åš´æ ¼æ·¨åŒ–ä»¥é˜²è·¯å¾‘ç©¿è¶Šï¼Œä¸¦éµå¾ªå°ˆæ¡ˆçš„çµæ§‹åŒ–æ—¥èªŒèˆ‡ CDP ä¸é—œé–‰åŸå‰‡ã€‚

---

## 2. æœ¬æ¬¡è®Šæ›´æ¸…å–®

| æäº¤ | æª”æ¡ˆ | ç›®çš„ |
|------|------|------|
| `9e1110e` | `src/download-ncert-report.ts`ï¼ˆæ–°å¢ï¼‰ | åˆç‰ˆ NCERT æœˆå ±è‡ªå‹•ä¸‹è¼‰è…³æœ¬ï¼šCDP é€£ç·šã€ç™»å…¥ã€PDF ä¸‹è¼‰ã€ç™»å‡º |
| `c16f5f1` | `src/download-ncert-report.ts`ï¼ˆä¿®æ”¹ï¼‰ | æ”¹æ¡ case-insensitive ARIA locatorï¼Œä¸¦åœ¨éš±è—ä¸‹æ‹‰é¸å–®ä¸­é€é hover é¡¯ç¤ºå­é¸å–®ä»¥é»é¸ç›®æ¨™é€£çµï¼›è‹¥ hover å¤±æ•—å‰‡æ¡å¤šæ­¥é©Ÿäº’å‹• (hover, pointer events, focus, mouse.move, dispatchEvent) ä»¥æé«˜æˆåŠŸç‡ï¼›æ‰¾ä¸åˆ°æ™‚ fallback è‡³ `Post2/list.do`ï¼›æª”åæ·¨åŒ–ä½¿ç”¨ `path.basename()` + æ­£å‰‡æ›¿æ› |
| `0e23506` | `src/download-ncert-report.ts`ï¼ˆä¿®æ”¹ï¼‰ | å¼·åŒ–ä¸‹æ‹‰é¸å–®æ­éœ²ç­–ç•¥ï¼šå˜—è©¦å¤šå€‹çˆ¶é … locatorï¼ˆlink/text/navï¼‰ï¼Œä¸¦ä½¿ç”¨ hoverã€dispatchEventï¼ˆpointerenter/over/mouseenter/mouseoverï¼‰ã€focus èˆ‡ page.mouse æ¨¡æ“¬è·¯å¾‘ç§»å‹•ä»¥æé«˜æˆåŠŸç‡ï¼›è‹¥æ­éœ²å¤±æ•—å‰‡ fallback è‡³ `Post2/list.do`ï¼›ä¿ç•™ CDP ä¸é—œé–‰ä½¿ç”¨è€… Chrome çš„åŸå‰‡ |
| `55d95a8` | `src/download-ncert-report.ts`ï¼ˆä¿®æ”¹ï¼‰ | å¼•å…¥ `safeFileName()` / `validateUrl()` å…±ç”¨å‡½æ•¸ï¼›æ–°å¢ `STRICT_SECOND_ROW` æ——æ¨™æ§åˆ¶æ˜¯å¦åªå–ç¬¬äºŒè³‡æ–™åˆ—ï¼›æ”¹ç”¨å­—ä¸²ä¸²æ¥å–ä»£ template literalï¼›å¢åŠ  CDP é€£ç·šå¾Œé é¢åˆ—è¡¨æ—¥èªŒï¼›æ‰€æœ‰ URL å°èˆªå‰åŠ å…¥ `validateUrl()` æª¢æŸ¥ |
| `55d95a8` | `src/materialsCollector.ts`ï¼ˆä¾è³´ï¼‰ | åŒ¯å‡º `safeFileName()` èˆ‡ `validateUrl()` ä¾›ä¸‹è¼‰è…³æœ¬ä½¿ç”¨ |
| `fd40ee5` | `.gitignore`ã€`output/` æ¸…ç† | å°‡ `output/` åŠ å…¥ `.gitignore`ï¼Œç§»é™¤å·²èª¤æäº¤çš„è‡¨æ™‚è¼¸å‡ºæª”æ¡ˆ |
| â€” | `.env.example` | æä¾›ç’°å¢ƒè®Šæ•¸ç¯„æœ¬ï¼ˆ`NCERT_USERNAME`ã€`NCERT_PASSWORD`ã€`CDP_PORT`ï¼‰ |

---

## 3. é©—è­‰æ­¥é©Ÿ

### 3.1 TypeScript ç·¨è­¯æª¢æŸ¥

```powershell
npx tsc --noEmit
```

é æœŸçµæœï¼šç„¡è¼¸å‡ºï¼ˆé›¶éŒ¯èª¤ï¼‰ã€‚

### 3.2 å•Ÿå‹• Chrome CDP

```powershell
.\launch-chrome.ps1          # é è¨­åŸ  9222
# æˆ–æŒ‡å®šåŸ è™Ÿï¼š
.\launch-chrome.ps1 -Port 9333
```

ç¢ºèª Chrome é–‹å•Ÿå¾Œï¼Œå¯åœ¨ç€è¦½å™¨ä¸­é€ è¨ª `http://localhost:9222/json/version` é©—è­‰ CDP å¯ç”¨ã€‚

### 3.3 è¨­å®šç’°å¢ƒè®Šæ•¸ä¸¦åŸ·è¡Œ

```powershell
# æ–¹æ³• Aï¼šè¤‡è£½ .env.example ä¸¦å¡«å…¥å¯¦éš›å€¼
Copy-Item .env.example .env
# ç·¨è¼¯ .env è¨­å®š NCERT_USERNAME èˆ‡ NCERT_PASSWORD

# æ–¹æ³• Bï¼šç›´æ¥è¨­å®šç’°å¢ƒè®Šæ•¸
$env:NCERT_USERNAME = 'your-account'
$env:NCERT_PASSWORD = 'your-password'

# åŸ·è¡Œè…³æœ¬
npx tsx src/download-ncert-report.ts
```

### 3.4 é æœŸè¼¸å‡º

```
[2026/02/11 17:00:00] ğŸš€ NCERT æœˆå ±ä¸‹è¼‰è…³æœ¬å•Ÿå‹•
[...] âœ… Chrome CDP é€£æ¥æˆåŠŸ
[...] âœ… ç™»å…¥æˆåŠŸ
[...] ğŸ“„ æ‰¾åˆ°ç›®æ¨™é€£çµ: 114å¹´01æœˆè³‡å®‰è¯é˜²ç›£æ§æœˆå ±.pdf
[...] âœ… æœˆå ±å·²å„²å­˜è‡³: D:\dev\automation\output\114å¹´01æœˆè³‡å®‰è¯é˜²ç›£æ§æœˆå ±.pdf
[...] âœ… å·²æˆåŠŸç™»å‡º
[...] ğŸ‰ NCERT æœˆå ±ä¸‹è¼‰æµç¨‹å®Œæˆï¼
```

PDF æª”æ¡ˆæœƒå­˜æ”¾æ–¼ `./output/` ç›®éŒ„ã€‚

---

## 4. é¢¨éšªèˆ‡å›é€€å»ºè­°

| é¢¨éšªé …ç›® | èªªæ˜ | ç·©è§£æªæ–½ |
|---------|------|---------|
| NCERT ç¶²ç«™ UI çµæ§‹è®Šæ›´ | è¡¨æ ¼æˆ–é€£çµçš„ DOM çµæ§‹è®Šå‹•æœƒå°è‡´ locator å¤±æ•— | è…³æœ¬å·²å…§å»º fallbackï¼ˆç›´æ¥å°èˆª `Post2/list.do`ï¼‰ï¼›å¤±æ•—æ™‚æ—¥èªŒå«å®Œæ•´å †ç–Šè¿½è¹¤ |
| ç¬¬äºŒåˆ—å®šä½éŒ¯èª¤ | è¡¨æ ¼è³‡æ–™åˆ—æ•¸ä¸è¶³æˆ–æ’åºæ”¹è®Šå¯èƒ½å–åˆ°éŒ¯èª¤çš„ PDF | ä½¿ç”¨ `STRICT_SECOND_ROW` æ——æ¨™æ§åˆ¶ï¼ˆè¦‹ä¸‹æ–¹ï¼‰ |
| æª”åå®‰å…¨ | ä¼ºæœå™¨å›å‚³çš„æª”åå¯èƒ½å«è·¯å¾‘ç©¿è¶Šå­—å…ƒ | å·²ä½¿ç”¨ `safeFileName()` åšåš´æ ¼æ·¨åŒ– |
| CDP é€£ç·šå¤±æ•— | Chrome æœªä»¥ Debug æ¨¡å¼å•Ÿå‹•æˆ–åŸ è™Ÿä¸ç¬¦ | å•Ÿå‹•å‰å…ˆç¢ºèª `http://localhost:9222/json/version` å¯å­˜å– |

### `STRICT_SECOND_ROW` æ——æ¨™

- **é è¨­å€¼**ï¼š`true`ï¼ˆåƒ…å…è¨±å¾è¡¨æ ¼ç¬¬äºŒè³‡æ–™åˆ—å–å¾— PDFï¼‰
- **ç”¨é€”**ï¼šç¢ºä¿ä¸‹è¼‰çš„æ˜¯ã€Œå‰ä¸€å€‹æœˆã€çš„æœˆå ±ï¼ˆç¬¬ä¸€åˆ—é€šå¸¸ç‚ºæœ€æ–°æœˆä»½ã€ç¬¬äºŒåˆ—ç‚ºå‰æœˆï¼‰
- **è¨­å®šæ–¹å¼**ï¼š

```powershell
# åš´æ ¼æ¨¡å¼ï¼ˆé è¨­ï¼‰â€” åªå–ç¬¬äºŒåˆ—ï¼Œæ‰¾ä¸åˆ°å‰‡ä¸­æ­¢
$env:STRICT_SECOND_ROW = 'true'

# å¯¬é¬†æ¨¡å¼ â€” è‹¥ç¬¬äºŒåˆ—æ‰¾ä¸åˆ°ï¼Œé€€è€Œå–è¡¨æ ¼å…§ç¬¬ä¸€å€‹ç¬¦åˆçš„ PDF
$env:STRICT_SECOND_ROW = 'false'
```

### å›é€€æ–¹å¼

è‹¥æœ¬æ¬¡è®Šæ›´å°è‡´å•é¡Œï¼Œå¯å›é€€è‡³åˆç‰ˆï¼š

```powershell
git revert fd40ee5 55d95a8 c16f5f1
# æˆ–ç›´æ¥ checkout åˆç‰ˆ
git checkout 9e1110e -- src/download-ncert-report.ts
```

---

## 5. æäº¤ç´€éŒ„æ‘˜è¦

| SHA | æ—¥æœŸ (UTC+8) | è¨Šæ¯ | èªªæ˜ |
|-----|-------------|------|------|
| `9e1110e` | 2026-02-11 15:55 | `feat(automation): æ–°å¢ NCERT æœˆå ±è‡ªå‹•ä¸‹è¼‰è…³æœ¬` | åˆç‰ˆåŠŸèƒ½ï¼šCDP é€£ç·šã€ç™»å…¥ã€ä¸‹è¼‰ PDFã€ç™»å‡ºï¼Œå« `.env` è¼‰å…¥èˆ‡çµæ§‹åŒ–æ—¥èªŒ |
| `c16f5f1` | 2026-02-11 16:25 | `fix(automation): ä¿®æ­£ NCERT æœˆå ±ä¸‹è¼‰æµç¨‹çš„é€£çµå°‹æ‰¾èˆ‡æª”åå®‰å…¨è™•ç†` | æ”¹å–„é€£çµæœå°‹ï¼ˆcase-insensitive + fallback å°èˆªï¼‰ï¼›åŸºæœ¬æª”åæ·¨åŒ– |
| `55d95a8` | 2026-02-11 17:19 | `fix(automation): å¼·åŒ–ç¬¬äºŒåˆ—å®šä½èˆ‡æª”åæ·¨åŒ–` | å¼•å…¥å…±ç”¨ `safeFileName()`/`validateUrl()`ï¼›æ–°å¢ `STRICT_SECOND_ROW` æ——æ¨™ï¼›å®Œå–„è¡¨æ ¼ç¬¬äºŒåˆ—å®šä½é‚è¼¯ |
| `fd40ee5` | 2026-02-11 17:23 | `chore: ç§»é™¤è‡¨æ™‚æª”æ¡ˆèˆ‡è¼¸å‡ºæª”æ¡ˆï¼ŒåŠ å…¥ output/ åˆ° .gitignore` | æ¸…ç†èª¤æäº¤çš„è¼¸å‡ºæª”ï¼Œç¢ºä¿ `output/` ä¸é€²ç‰ˆæ§ |

---

> ğŸ“Œ å¦‚éœ€å®Œæ•´ commit æ­·å²ï¼Œè«‹åŸ·è¡Œ `git --no-pager log --oneline`ã€‚

---

## 6. æ–‡ä»¶æ›´æ–°ï¼šå¼·åŒ–ä½¿ç”¨æŒ‡å— - æ–°å¢é«˜å“è³ª Prompt èˆ‡ Debug ç¯„æœ¬

- **æäº¤**ï¼š`docs(guides): å¼·åŒ–ä½¿ç”¨æŒ‡å— - æ–°å¢é«˜å“è³ª Prompt èˆ‡ Debug ç¯„æœ¬`
- **æ—¥æœŸ**ï¼š2026-02-12ï¼ˆAsia/Taipeiï¼‰
- **èªªæ˜**ï¼šåœ¨ `docs/ä½¿ç”¨æŒ‡å—.md` æ–°å¢ã€Œé«˜å“è³ª Prompt ç¯„æœ¬ï¼ˆTemplateï¼‰ã€èˆ‡ã€Œæ”¹è‰¯ Debug Prompt ç¯„æœ¬ï¼ˆTemplateï¼‰ã€ï¼Œè£œå……äº†å…·é«”çš„æ¬„ä½èªªæ˜ã€ä¸‰å€‹å±¤ç´šçš„ç”Ÿæˆ prompt ç¯„ä¾‹ï¼ˆç²¾ç°¡/æ¨™æº–/æ¥µç´°ç¯€ï¼‰ã€ä»¥åŠä¸‰å€‹å¯¦å‹™ Debug ç¯„ä¾‹ï¼ˆhover reveal / second-row / filename downloadï¼‰ã€‚README.md åŒæ­¥æ–°å¢ç²¾ç°¡å°è¦½é€£çµï¼›docs/commit.md æ–°å¢æœ¬æ¬¡æ›´æ–°è¨˜éŒ„èˆ‡é©—è­‰æ­¥é©Ÿã€‚

### é©—è­‰æ­¥é©Ÿï¼ˆå¿«é€Ÿï¼‰
1. æ‰“é–‹ `docs/ä½¿ç”¨æŒ‡å—.md`ï¼Œæœå°‹ã€Œé«˜å“è³ª Prompt ç¯„æœ¬ã€èˆ‡ã€Œæ”¹è‰¯ Debug Prompt ç¯„æœ¬ã€æ¨™é¡Œã€‚
2. ç¢ºèªæ–‡ä»¶ä¸­åŒ…å«ã€Œç²¾ç°¡ / æ¨™æº– / æ¥µç´°ç¯€ã€ä¸‰ç¨®ç”Ÿæˆ prompt ç¯„ä¾‹èˆ‡ä¸‰å€‹ Debug ç¯„ä¾‹ã€‚
3. åœ¨æœ‰ç¶²è·¯çš„ç’°å¢ƒè¤‡è£½ä¸€çµ„ç¯„ä¾‹é€² LLMï¼Œç¢ºèªèƒ½æˆåŠŸå›å‚³ TypeScript è…³æœ¬ç¯„ä¾‹ã€‚

---

> ğŸ“Œ å¦‚éœ€å®Œæ•´ commit æ­·å²ï¼Œè«‹åŸ·è¡Œ `git --no-pager log --oneline`ã€‚
